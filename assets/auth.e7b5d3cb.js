import{d as s}from"./pinia.81942998.js";import{a as r,b as a}from"./axios.ca9091c1.js";import"./index.0d3749aa.js";const c=s("auth",{state:()=>({user:null,authenticated:!1}),getters:{isAuthenticated:e=>!!e.user&&e.authenticated},actions:{async sanctum(){const t=(()=>"https://ai.camaratech.com.br".replace("/api",""))();return r.create({baseURL:t,withCredentials:!0,withXSRFToken:!0}).get("/sanctum/csrf-cookie")},async login(e,t){return await a.post("/api/auth/login",{email:e,password:t})},async logout(){var e;this.user=null,this.authenticated=!1;try{await a.post("/api/auth/logout")}catch(t){((e=t.response)==null?void 0:e.status)!==401&&console.error("Erro ao fazer logout:",t)}},async me(){var e;try{const t=await a.get("/api/auth/me");return this.user=t.data.data||t.data,this.authenticated=!0,this.user}catch(t){throw((e=t.response)==null?void 0:e.status)===401?(this.user=null,this.authenticated=!1):this.logout(),t}}}});export{c as useAuth};
