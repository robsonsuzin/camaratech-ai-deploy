import{b3 as c,a5 as w,j as V,r as g,s as y,a6 as _,a7 as n,a9 as Q,ak as i,am as S,aa as l,al as U,b8 as s,ad as p,b2 as k,an as x}from"./index.0d3749aa.js";import{Q as h}from"./QSelect.924c04e8.js";import{Q as C}from"./QForm.5b95489a.js";import{Q as E}from"./QPage.22d0f341.js";import{u as N}from"./user.afa846f2.js";import{u as B}from"./use-quasar.192cb9b2.js";import"./QItem.78bfbbe5.js";import"./format.d4152734.js";import"./pinia.81942998.js";import"./axios.ca9091c1.js";const $={class:"tw-mb-6"},D={class:"tw-text-3xl tw-font-bold"},F={class:"tw-grid tw-grid-cols-2 tw-gap-4"},R={class:"tw-flex tw-gap-4"},J={__name:"Form",setup(j){const m=c(),v=w(),u=N(),d=B(),r=V(()=>!!m.params.token),e=g({first_name:"",last_name:"",email:"",password:"",phone:"",status:"ativo"}),f=["ativo","inativo"];y(async()=>{if(r.value){const t=await u.get(m.params.token);t&&(e.value={first_name:t.first_name||"",last_name:t.last_name||"",email:t.email||"",password:"",phone:t.phone||"",status:t.status||"ativo"})}});const b=async()=>{try{const t={...e.value};t.password||delete t.password,r.value?(await u.update(m.params.token,t),d.notify({type:"positive",message:"Usu\xE1rio atualizado com sucesso!"})):(await u.create(t),d.notify({type:"positive",message:"Usu\xE1rio criado com sucesso!"})),v.push("/users")}catch{d.notify({type:"negative",message:"Erro ao salvar usu\xE1rio"})}};return(t,o)=>(Q(),_(E,{class:"tw-p-6"},{default:n(()=>[i("div",$,[i("h1",D,S(r.value?"Editar Usu\xE1rio":"Novo Usu\xE1rio"),1)]),l(x,null,{default:n(()=>[l(U,null,{default:n(()=>[l(C,{onSubmit:b,class:"tw-space-y-4"},{default:n(()=>[i("div",F,[l(s,{modelValue:e.value.first_name,"onUpdate:modelValue":o[0]||(o[0]=a=>e.value.first_name=a),label:"Nome",rules:[a=>!!a||"Nome \xE9 obrigat\xF3rio"],outlined:""},null,8,["modelValue","rules"]),l(s,{modelValue:e.value.last_name,"onUpdate:modelValue":o[1]||(o[1]=a=>e.value.last_name=a),label:"Sobrenome",outlined:""},null,8,["modelValue"])]),l(s,{modelValue:e.value.email,"onUpdate:modelValue":o[2]||(o[2]=a=>e.value.email=a),label:"E-mail",type:"email",rules:[a=>!!a||"E-mail \xE9 obrigat\xF3rio"],outlined:""},null,8,["modelValue","rules"]),l(s,{modelValue:e.value.password,"onUpdate:modelValue":o[3]||(o[3]=a=>e.value.password=a),label:"Senha",type:"password",rules:[a=>!r.value||!!a||"Senha \xE9 obrigat\xF3ria"],outlined:"",hint:"Deixe em branco para manter a senha atual (ao editar)"},null,8,["modelValue","rules"]),l(s,{modelValue:e.value.phone,"onUpdate:modelValue":o[4]||(o[4]=a=>e.value.phone=a),label:"Telefone",outlined:""},null,8,["modelValue"]),l(h,{modelValue:e.value.status,"onUpdate:modelValue":o[5]||(o[5]=a=>e.value.status=a),options:f,label:"Status",outlined:""},null,8,["modelValue"]),i("div",R,[l(p,{type:"submit",color:"primary",label:"Salvar",loading:k(u).loading},null,8,["loading"]),l(p,{flat:"",label:"Cancelar",onClick:o[6]||(o[6]=a=>t.$router.back())})])]),_:1})]),_:1})]),_:1})]),_:1}))}};export{J as default};
