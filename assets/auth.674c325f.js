import{d as s}from"./pinia.416f3d4a.js";import{a as r,b as a}from"./axios.75cbcf9c.js";import"./index.0cd5b2c0.js";const n=s("auth",{state:()=>({user:null,authenticated:!1}),getters:{isAuthenticated:t=>!!t.user&&t.authenticated},actions:{async sanctum(){const t={}.VITE_API_URL?{}.VITE_API_URL.replace("/api",""):"http://127.0.0.1:8010";return r.create({baseURL:t,withCredentials:!0,withXSRFToken:!0}).get("/sanctum/csrf-cookie")},async login(t,e){return await a.post("/auth/login",{email:t,password:e})},async logout(){var t;this.user=null,this.authenticated=!1;try{await a.post("/auth/logout")}catch(e){((t=e.response)==null?void 0:t.status)!==401&&console.error("Erro ao fazer logout:",e)}},async me(){var t;try{const e=await a.get("/auth/me");return this.user=e.data.data||e.data,this.authenticated=!0,this.user}catch(e){throw((t=e.response)==null?void 0:t.status)===401?(this.user=null,this.authenticated=!1):this.logout(),e}}}});export{n as useAuth};
