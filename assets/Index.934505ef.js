import{Q as ye}from"./QSelect.924c04e8.js";import{k as Se,O as qe,bb as Be,Q as Pe,j as w,r as b,w as ce,bc as _e,bd as De,l as $,b8 as se,x as Ce,ah as Te,ad as oe,aJ as Ne,aL as Fe,aR as Qe,be as ve,s as Me,a6 as Y,a7 as n,a9 as h,ak as l,aa as s,al as P,b4 as O,b7 as F,an as Q,am as r,ab as G,ac as R,aB as xe,bf as Re,b6 as ze,bg as $e,bh as Ie,b5 as Ue,b0 as je}from"./index.0d3749aa.js";import{Q as de}from"./QBadge.b7d5b574.js";import{Q as he,a as z}from"./QTable.6d3344bf.js";import{b as Le}from"./format.d4152734.js";import{Q as Ee}from"./QPage.22d0f341.js";import{u as Oe}from"./unit.4a5e1191.js";import{u as Ae}from"./usage.4448b393.js";import{u as Ke}from"./use-quasar.192cb9b2.js";import"./QItem.78bfbbe5.js";import"./QList.efe7843a.js";import"./pinia.81942998.js";import"./axios.ca9091c1.js";function le(e,C){return[!0,!1].includes(e)?e:C}var He=Se({name:"QPagination",props:{...qe,modelValue:{type:Number,required:!0},min:{type:[Number,String],default:1},max:{type:[Number,String],required:!0},maxPages:{type:[Number,String],default:0,validator:e=>(typeof e=="string"?parseInt(e,10):e)>=0},inputStyle:[Array,String,Object],inputClass:[Array,String,Object],size:String,disable:Boolean,input:Boolean,iconPrev:String,iconNext:String,iconFirst:String,iconLast:String,toFn:Function,boundaryLinks:{type:Boolean,default:null},boundaryNumbers:{type:Boolean,default:null},directionLinks:{type:Boolean,default:null},ellipses:{type:Boolean,default:null},ripple:{type:[Boolean,Object],default:null},round:Boolean,rounded:Boolean,flat:Boolean,outline:Boolean,unelevated:Boolean,push:Boolean,glossy:Boolean,color:{type:String,default:"primary"},textColor:String,activeDesign:{type:String,default:"",values:e=>e===""||Be.includes(e)},activeColor:String,activeTextColor:String,gutter:String,padding:{type:String,default:"3px 2px"}},emits:["update:modelValue"],setup(e,{emit:C}){const{proxy:I}=Ce(),{$q:f}=I,p=Pe(e,f),c=w(()=>parseInt(e.min,10)),m=w(()=>parseInt(e.max,10)),D=w(()=>parseInt(e.maxPages,10)),T=w(()=>N.value+" / "+m.value),u=w(()=>le(e.boundaryLinks,e.input)),y=w(()=>le(e.boundaryNumbers,!e.input)),V=w(()=>le(e.directionLinks,e.input)),U=w(()=>le(e.ellipses,!e.input)),x=b(null),N=w({get:()=>e.modelValue,set:i=>{if(i=parseInt(i,10),e.disable||isNaN(i))return;const d=Le(i,c.value,m.value);e.modelValue!==d&&C("update:modelValue",d)}});ce(()=>`${c.value}|${m.value}`,()=>{N.value=e.modelValue});const k=w(()=>"q-pagination row no-wrap items-center"+(e.disable===!0?" disabled":"")),j=w(()=>e.gutter in _e?`${_e[e.gutter]}px`:e.gutter||null),J=w(()=>j.value!==null?`--q-pagination-gutter-parent:-${j.value};--q-pagination-gutter-child:${j.value}`:null),g=w(()=>{const i=[e.iconFirst||f.iconSet.pagination.first,e.iconPrev||f.iconSet.pagination.prev,e.iconNext||f.iconSet.pagination.next,e.iconLast||f.iconSet.pagination.last];return f.lang.rtl===!0?i.reverse():i}),ne=w(()=>({"aria-disabled":e.disable===!0?"true":"false",role:"navigation"})),W=w(()=>De(e,"flat")),ie=w(()=>({[W.value]:!0,round:e.round,rounded:e.rounded,padding:e.padding,color:e.color,textColor:e.textColor,size:e.size,ripple:e.ripple!==null?e.ripple:!0})),ue=w(()=>{const i={[W.value]:!1};return e.activeDesign!==""&&(i[e.activeDesign]=!0),i}),X=w(()=>({...ue.value,color:e.activeColor||e.color,textColor:e.activeTextColor||e.textColor})),S=w(()=>{let i=Math.max(D.value,1+(U.value?2:0)+(y.value?2:0));const d={pgFrom:c.value,pgTo:m.value,ellipsesStart:!1,ellipsesEnd:!1,boundaryStart:!1,boundaryEnd:!1,marginalStyle:{minWidth:`${Math.max(2,String(m.value).length)}em`}};return D.value&&i<m.value-c.value+1&&(i=1+Math.floor(i/2)*2,d.pgFrom=Math.max(c.value,Math.min(m.value-i+1,e.modelValue-Math.floor(i/2))),d.pgTo=Math.min(m.value,d.pgFrom+i-1),y.value&&(d.boundaryStart=!0,d.pgFrom++),U.value&&d.pgFrom>c.value+(y.value?1:0)&&(d.ellipsesStart=!0,d.pgFrom++),y.value&&(d.boundaryEnd=!0,d.pgTo--),U.value&&d.pgTo<m.value-(y.value?1:0)&&(d.ellipsesEnd=!0,d.pgTo--)),d});function A(i){N.value=i}function _(i){N.value=N.value+i}function Z(){N.value=x.value,x.value=null,f.platform.is.mobile===!0&&document.activeElement.blur()}function H(i){x.value=i}function re(i){Te(i,13)===!0&&Z()}function B(i,d,L){const M={"aria-label":d,"aria-current":"false",...ie.value,...i};return L===!0&&Object.assign(M,{"aria-current":"true",...X.value}),d!==void 0&&(e.toFn!==void 0?M.to=e.toFn(d):M.onClick=()=>{A(d)}),$(oe,M)}return Object.assign(I,{set:A,setByOffset:_}),()=>{const i=[],d=[];let L;if(u.value===!0&&(i.push(B({key:"bls",disable:e.disable||e.modelValue<=c.value,icon:g.value[0],"aria-label":f.lang.pagination.first},c.value)),d.unshift(B({key:"ble",disable:e.disable||e.modelValue>=m.value,icon:g.value[3],"aria-label":f.lang.pagination.last},m.value))),V.value===!0&&(i.push(B({key:"bdp",disable:e.disable||e.modelValue<=c.value,icon:g.value[1],"aria-label":f.lang.pagination.prev},e.modelValue-1)),d.unshift(B({key:"bdn",disable:e.disable||e.modelValue>=m.value,icon:g.value[2],"aria-label":f.lang.pagination.next},e.modelValue+1))),e.input!==!0){L=[];const{pgFrom:M,pgTo:ee,marginalStyle:K}=S.value;if(S.value.boundaryStart===!0){const q=c.value===e.modelValue;i.push(B({key:"bns",style:K,disable:e.disable,label:c.value},c.value,q))}if(S.value.boundaryEnd===!0){const q=m.value===e.modelValue;d.unshift(B({key:"bne",style:K,disable:e.disable,label:m.value},m.value,q))}S.value.ellipsesStart===!0&&i.push(B({key:"bes",style:K,disable:e.disable,label:"\u2026",ripple:!1},M-1)),S.value.ellipsesEnd===!0&&d.unshift(B({key:"bee",style:K,disable:e.disable,label:"\u2026",ripple:!1},ee+1));for(let q=M;q<=ee;q++)L.push(B({key:`bpg${q}`,style:K,disable:e.disable,label:q},q,q===e.modelValue))}return $("div",{class:k.value,...ne.value},[$("div",{class:"q-pagination__content row no-wrap items-center",style:J.value},[...i,e.input===!0?$(se,{class:"inline",style:{width:`${T.value.length/1.5}em`},type:"number",dense:!0,value:x.value,disable:e.disable,dark:p.value,borderless:!0,inputClass:e.inputClass,inputStyle:e.inputStyle,placeholder:T.value,min:c.value,max:m.value,"onUpdate:modelValue":H,onKeyup:re,onBlur:Z}):$("div",{class:"q-pagination__middle row justify-center"},L),...d])])}}}),ke=Se({name:"QInnerLoading",props:{...qe,...Ne,showing:Boolean,color:String,size:{type:[String,Number],default:"42px"},label:String,labelClass:String,labelStyle:[String,Array,Object]},setup(e,{slots:C}){const I=Ce(),f=Pe(e,I.proxy.$q),{transitionProps:p,transitionStyle:c}=Fe(e),m=w(()=>"q-inner-loading q--avoid-card-border absolute-full column flex-center"+(f.value===!0?" q-inner-loading--dark":"")),D=w(()=>"q-inner-loading__label"+(e.labelClass!==void 0?` ${e.labelClass}`:""));function T(){const y=[$(ve,{size:e.size,color:e.color})];return e.label!==void 0&&y.push($("div",{class:D.value,style:e.labelStyle},[e.label])),y}function u(){return e.showing===!0?$("div",{class:m.value,style:c.value},C.default!==void 0?C.default():T()):null}return()=>$(Qe,p.value,u)}});const Je={class:"row"},We={class:"col-12 col-md-4 tw-pr-2 tw-mb-3 tw-mb-md-0"},Ye={class:"col-12 col-md-3 tw-pr-2 tw-mb-3 tw-mb-md-0"},Ge={key:0,class:"col-12 col-md-2 tw-pr-2 tw-mb-3 tw-mb-md-0"},Xe={key:1,class:"col-12 col-md-2 tw-pr-2 tw-mb-3 tw-mb-md-0"},Ze={key:2,class:"col-12 col-md-2 tw-mb-3 tw-mb-md-0"},et={key:0,class:"tw-grid tw-grid-cols-1 sm:tw-grid-cols-2 xl:tw-grid-cols-4 tw-gap-4 tw-mb-6"},tt={class:"tw-flex"},at={class:"tw-flex tw-items-center tw-justify-between"},lt={class:"tw-text-3xl tw-font-bold tw-mt-2"},st={class:"tw-flex"},ot={class:"tw-flex tw-items-center tw-justify-between"},nt={class:"tw-text-3xl tw-font-bold tw-mt-2 tw-text-green-600"},it={class:"tw-text-xs tw-text-gray-500 tw-mt-1"},ut={class:"tw-flex"},rt={class:"tw-flex tw-items-center tw-justify-between"},dt={class:"tw-text-3xl tw-font-bold tw-mt-2"},ct={key:0,class:"tw-text-xs tw-text-gray-500 tw-mt-1"},vt={class:"tw-flex"},mt={class:"tw-flex tw-items-center tw-justify-between"},wt={class:"tw-text-3xl tw-font-bold tw-mt-2"},gt={class:"tw-text-green-600"},ft={class:"tw-text-xl tw-font-bold"},bt={class:"tw-text-sm tw-text-gray-600"},pt={key:0,class:"tw-flex tw-flex-col tw-gap-3 tw-mt-4 tw-md:flex-row tw-md:items-center tw-md:justify-between"},yt={class:"tw-text-sm tw-text-gray-600"},_t={class:"tw-space-y-4"},xt={class:"tw-flex tw-items-center tw-justify-between tw-mb-2"},ht={class:"tw-font-medium tw-capitalize"},kt={class:"tw-text-sm tw-text-gray-600"},St={class:"tw-w-full tw-bg-gray-200 tw-rounded-full tw-h-4"},qt={class:"tw-text-sm tw-text-gray-500"},Pt={class:"tw-grid tw-gap-4 tw-mb-4 sm:tw-grid-cols-2"},Ct={class:"tw-font-semibold tw-mt-1"},Vt={class:"tw-text-sm tw-text-gray-500"},Bt={class:"tw-font-semibold tw-mt-1"},Dt={class:"tw-font-semibold tw-mt-1"},Tt={class:"tw-mb-4"},Nt={class:"tw-bg-gray-100 tw-rounded tw-p-3 tw-text-sm tw-whitespace-pre-wrap tw-max-h-72 tw-overflow-auto"},Ft={class:"tw-bg-gray-100 tw-rounded tw-p-3 tw-text-sm tw-whitespace-pre-wrap tw-max-h-72 tw-overflow-auto"},Ht={__name:"Index",setup(e){const C=Ke(),I=Oe(),f=Ae(),p=b(null),c=b("monthly"),m=b(new Date().getFullYear()),D=b(new Date().getMonth()+1),T=b(new Date().toISOString().split("T")[0]),u=b(null),y=b(!1),V=b(null),U=b([]),x=b(null),N=b(!1),k=b({page:1,rowsPerPage:10,rowsNumber:0}),j=b(!1),J=b(!1),g=b(null),ne=[{label:"Mensal",value:"monthly"},{label:"Di\xE1rio",value:"daily"}],W=w(()=>I.units.map(o=>({label:o.name,value:o.token,name:o.name,token:o.token}))),ie=[{name:"provider",label:"Provedor",field:"provider",align:"left"},{name:"total_requests",label:"Total de Requisi\xE7\xF5es",field:"total_requests",align:"right"},{name:"successful_requests",label:"Bem-sucedidas",field:"successful_requests",align:"right"},{name:"total_tokens",label:"Total de Tokens",field:"total_tokens",align:"right"},{name:"total_cost",label:"Custo Total",field:"total_cost",align:"right"}],ue=[{name:"created_at",label:"Data",field:"created_at",align:"left"},{name:"model",label:"Modelo",field:"model",align:"left"},{name:"status",label:"Status",field:"status",align:"left"},{name:"total_tokens",label:"Tokens",field:"total_tokens",align:"right"},{name:"cost",label:"Custo",field:"cost",align:"right"},{name:"response_time_ms",label:"Tempo",field:"response_time_ms",align:"right"},{name:"actions",label:"",field:"actions",align:"right"}],X=()=>{const o={period:c.value};return c.value==="monthly"?(o.year=m.value,o.month=D.value):c.value==="daily"&&(o.date=T.value),o},S=async()=>{var o,a;if(!p.value){u.value=null;return}y.value=!0;try{const t={...X(),include_providers:!0},v=p.value,E=await f.getUnitUsage(v,t);u.value=E,V.value&&await A()}catch(t){C.notify({type:"negative",message:"Erro ao carregar estat\xEDsticas",caption:((a=(o=t.response)==null?void 0:o.data)==null?void 0:a.message)||t.message}),u.value=null}finally{y.value=!1}},A=async()=>{var o,a;if(!p.value||!V.value){U.value=[],x.value=null;return}N.value=!0;try{const t={...X(),provider:V.value,page:k.value.page,per_page:k.value.rowsPerPage,sort:"created_at",direction:"desc"},v=await f.listRequests(p.value,t);U.value=(v==null?void 0:v.requests)||[],x.value=(v==null?void 0:v.pagination)||null,v!=null&&v.pagination&&(k.value.rowsPerPage=v.pagination.per_page,k.value.rowsNumber=v.pagination.total)}catch(t){C.notify({type:"negative",message:"Erro ao carregar requisi\xE7\xF5es do provedor",caption:((a=(o=t.response)==null?void 0:o.data)==null?void 0:a.message)||t.message})}finally{N.value=!1}},_=o=>o?new Intl.NumberFormat("pt-BR").format(o):"0",Z=w(()=>{var o;return((o=u.value)==null?void 0:o.currency)||"USD"}),H=(o,a)=>{const t=Number(o)||0,v=a||Z.value||"USD",E=Math.abs(t),te=E<1?6:2,ae=new Intl.NumberFormat("pt-BR",{minimumFractionDigits:E<1?4:2,maximumFractionDigits:te}).format(t);return`${v} ${ae}`},re=o=>({claude:"purple",grok:"orange",openai:"green"})[o==null?void 0:o.toLowerCase()]||"grey",B=o=>({claude:"tw-bg-purple-500",grok:"tw-bg-orange-500",openai:"tw-bg-green-500"})[o==null?void 0:o.toLowerCase()]||"tw-bg-gray-500",i=o=>o.provider===V.value?"tw-bg-blue-50":"",d=async(o,a)=>{V.value=a.provider,k.value.page=1,await A()},L=()=>{V.value=null,U.value=[],x.value=null,k.value.page=1},M=async o=>{k.value.page=o,await A()},ee=async o=>{var a,t;j.value=!0,J.value=!0;try{g.value=await f.getRequest(p.value,o.id)}catch(v){C.notify({type:"negative",message:"Falha ao carregar detalhes da requisi\xE7\xE3o",caption:((t=(a=v.response)==null?void 0:a.data)==null?void 0:t.message)||v.message}),g.value=null}finally{J.value=!1}},K=o=>o?new Intl.DateTimeFormat("pt-BR",{dateStyle:"short",timeStyle:"short"}).format(new Date(o)):"-",q=w(()=>c.value==="monthly"?`${String(D.value).padStart(2,"0")}/${m.value}`:c.value==="daily"?T.value:"Per\xEDodo selecionado"),Ve=o=>o?typeof window=="undefined"?o:new DOMParser().parseFromString(`<!doctype html><body>${o}`,"text/html").body.textContent||o:"",me=(o,a="Sem dados registrados")=>Ve(o)||a;return Me(async()=>{try{await I.list(),I.units.length>0&&(p.value=W.value[0].token,await S())}catch{C.notify({type:"negative",message:"Erro ao carregar unidades"})}}),ce(p,()=>{L()}),ce([c,m,D,T],async()=>{V.value&&p.value&&(k.value.page=1,await A())}),(o,a)=>(h(),Y(Ee,{class:"tw-p-6"},{default:n(()=>[a[22]||(a[22]=l("div",{class:"tw-mb-6"},[l("h1",{class:"tw-text-3xl tw-font-bold"},"Estat\xEDsticas de Uso"),l("p",{class:"tw-text-gray-600"},"Relat\xF3rios e m\xE9tricas do sistema de IA")],-1)),s(Q,{class:"tw-mb-6 tw-shadow-none",flat:"",bordered:""},{default:n(()=>[s(P,{class:"tw-p-4"},{default:n(()=>[l("div",Je,[l("div",We,[s(ye,{modelValue:p.value,"onUpdate:modelValue":[a[0]||(a[0]=t=>p.value=t),S],options:W.value,"option-label":"name","emit-value":"","map-options":"",label:"Unidade",outlined:"",dense:""},null,8,["modelValue","options"])]),l("div",Ye,[s(ye,{modelValue:c.value,"onUpdate:modelValue":[a[1]||(a[1]=t=>c.value=t),S],options:ne,"option-label":"label","option-value":"value","emit-value":"","map-options":"",label:"Per\xEDodo",outlined:"",dense:""},null,8,["modelValue"])]),c.value==="monthly"?(h(),O("div",Ge,[s(se,{modelValue:m.value,"onUpdate:modelValue":[a[2]||(a[2]=t=>m.value=t),S],modelModifiers:{number:!0},label:"Ano",type:"number",outlined:"",dense:""},null,8,["modelValue"])])):F("",!0),c.value==="monthly"?(h(),O("div",Xe,[s(se,{modelValue:D.value,"onUpdate:modelValue":[a[3]||(a[3]=t=>D.value=t),S],modelModifiers:{number:!0},label:"M\xEAs",type:"number",min:"1",max:"12",outlined:"",dense:""},null,8,["modelValue"])])):F("",!0),c.value==="daily"?(h(),O("div",Ze,[s(se,{modelValue:T.value,"onUpdate:modelValue":[a[4]||(a[4]=t=>T.value=t),S],label:"Data",type:"date",outlined:"",dense:""},null,8,["modelValue"])])):F("",!0)])]),_:1})]),_:1}),u.value?(h(),O("div",et,[l("div",tt,[s(Q,{flat:"",bordered:"",class:"tw-shadow-none tw-h-full tw-w-full"},{default:n(()=>[s(P,{class:"tw-p-4"},{default:n(()=>[l("div",at,[l("div",null,[a[8]||(a[8]=l("div",{class:"tw-text-sm tw-text-gray-600"},"Total de Requisi\xE7\xF5es",-1)),l("div",lt,r(_(u.value.total_requests)),1)]),s(G,{name:"api",size:"48px",color:"primary"})])]),_:1})]),_:1})]),l("div",st,[s(Q,{flat:"",bordered:"",class:"tw-shadow-none tw-h-full tw-w-full"},{default:n(()=>[s(P,{class:"tw-p-4"},{default:n(()=>[l("div",ot,[l("div",null,[a[9]||(a[9]=l("div",{class:"tw-text-sm tw-text-gray-600"},"Requisi\xE7\xF5es Bem-sucedidas",-1)),l("div",nt,r(_(u.value.successful_requests)),1),l("div",it,r(u.value.total_requests>0?(u.value.successful_requests/u.value.total_requests*100).toFixed(1):0)+"% de sucesso ",1)]),s(G,{name:"check_circle",size:"48px",color:"positive"})])]),_:1})]),_:1})]),l("div",ut,[s(Q,{flat:"",bordered:"",class:"tw-shadow-none tw-h-full tw-w-full"},{default:n(()=>[s(P,{class:"tw-p-4"},{default:n(()=>[l("div",rt,[l("div",null,[a[10]||(a[10]=l("div",{class:"tw-text-sm tw-text-gray-600"},"Total de Tokens",-1)),l("div",dt,r(_(u.value.total_tokens)),1),u.value.total_input_tokens?(h(),O("div",ct," Entrada: "+r(_(u.value.total_input_tokens))+" | Sa\xEDda: "+r(_(u.value.total_output_tokens)),1)):F("",!0)]),s(G,{name:"memory",size:"48px",color:"info"})])]),_:1})]),_:1})]),l("div",vt,[s(Q,{flat:"",bordered:"",class:"tw-shadow-none tw-h-full tw-w-full"},{default:n(()=>[s(P,{class:"tw-p-4"},{default:n(()=>[l("div",mt,[l("div",null,[a[11]||(a[11]=l("div",{class:"tw-text-sm tw-text-gray-600"},"Custo Total",-1)),l("div",wt,r(H(u.value.total_cost,u.value.currency)),1)]),s(G,{name:"attach_money",size:"48px",color:"warning"})])]),_:1})]),_:1})])])):F("",!0),u.value&&u.value.providers&&u.value.providers.length>0?(h(),Y(Q,{key:1,flat:"",bordered:"",class:"tw-shadow-none"},{default:n(()=>[s(P,{class:"tw-p-4"},{default:n(()=>[a[12]||(a[12]=l("div",{class:"tw-flex tw-items-center tw-justify-between tw-mb-4"},[l("h2",{class:"tw-text-xl tw-font-bold"},"Estat\xEDsticas por Provedor")],-1)),s(he,{rows:u.value.providers,columns:ie,"row-key":"provider",flat:"",loading:y.value,onRowClick:d,"row-class":i,"no-data-label":"Nenhum provedor encontrado"},{"body-cell-provider":n(t=>[s(z,{props:t},{default:n(()=>[s(de,{color:re(t.value),class:"tw-capitalize"},{default:n(()=>[R(r(t.value),1)]),_:2},1032,["color"])]),_:2},1032,["props"])]),"body-cell-total_requests":n(t=>[s(z,{props:t},{default:n(()=>[R(r(_(t.value)),1)]),_:2},1032,["props"])]),"body-cell-successful_requests":n(t=>[s(z,{props:t},{default:n(()=>[l("span",gt,r(_(t.value)),1)]),_:2},1032,["props"])]),"body-cell-total_tokens":n(t=>[s(z,{props:t},{default:n(()=>[R(r(_(t.value)),1)]),_:2},1032,["props"])]),"body-cell-total_cost":n(t=>[s(z,{props:t},{default:n(()=>[R(r(H(t.value,t.row.currency)),1)]),_:2},1032,["props"])]),_:1},8,["rows","loading"])]),_:1})]),_:1})):F("",!0),V.value?(h(),Y(Q,{key:2,class:"tw-mt-6 tw-shadow-none",flat:"",bordered:""},{default:n(()=>[s(P,{class:"tw-flex tw-items-center tw-justify-between tw-gap-4 tw-p-4"},{default:n(()=>[l("div",null,[l("h2",ft," Requisi\xE7\xF5es do provedor "+r(V.value),1),l("p",bt," Per\xEDodo: "+r(q.value),1)]),s(oe,{flat:"",color:"primary",icon:"close",label:"Limpar sele\xE7\xE3o",onClick:L})]),_:1}),s(xe),s(P,{class:"tw-p-4"},{default:n(()=>[s(he,{rows:U.value,columns:ue,"row-key":"id",flat:"",loading:N.value,"hide-bottom":"","no-data-label":"Nenhuma requisi\xE7\xE3o encontrada para esse provedor"},{"body-cell-status":n(t=>[s(z,{props:t},{default:n(()=>[s(de,{color:t.value==="success"?"positive":"negative",class:"tw-capitalize"},{default:n(()=>[R(r(t.value),1)]),_:2},1032,["color"])]),_:2},1032,["props"])]),"body-cell-cost":n(t=>[s(z,{props:t},{default:n(()=>[R(r(H(t.row.cost,t.row.cost_currency)),1)]),_:2},1032,["props"])]),"body-cell-created_at":n(t=>[s(z,{props:t},{default:n(()=>[R(r(K(t.value)),1)]),_:2},1032,["props"])]),"body-cell-actions":n(t=>[s(z,{props:t,class:"tw-text-right"},{default:n(()=>[s(oe,{size:"sm",color:"primary",flat:"",icon:"visibility",label:"Visualizar",onClick:Re(v=>ee(t.row),["stop"])},null,8,["onClick"])]),_:2},1032,["props"])]),_:1},8,["rows","loading"]),x.value&&x.value.total>0?(h(),O("div",pt,[l("div",yt," Mostrando at\xE9 "+r(x.value.per_page)+" de "+r(x.value.total)+" requisi\xE7\xF5es ",1),s(He,{modelValue:k.value.page,"onUpdate:modelValue":[a[5]||(a[5]=t=>k.value.page=t),M],max:x.value.last_page,color:"primary","boundary-numbers":""},null,8,["modelValue","max"])])):F("",!0)]),_:1})]),_:1})):F("",!0),u.value&&u.value.providers&&u.value.providers.length>0?(h(),Y(Q,{key:3,class:"tw-mt-6 tw-shadow-none",flat:"",bordered:""},{default:n(()=>[s(P,{class:"tw-p-4"},{default:n(()=>[a[13]||(a[13]=l("h2",{class:"tw-text-xl tw-font-bold tw-mb-4"},"Distribui\xE7\xE3o por Provedor",-1)),l("div",_t,[(h(!0),O(Ue,null,ze(u.value.providers,t=>(h(),O("div",{key:t.provider,class:"tw-mb-4"},[l("div",xt,[l("span",ht,r(t.provider),1),l("span",kt,r(_(t.total_requests))+" requisi\xE7\xF5es ",1)]),l("div",St,[l("div",{class:$e(["tw-h-4 tw-rounded-full tw-transition-all",B(t.provider)]),style:Ie({width:`${u.value.total_requests>0?t.total_requests/u.value.total_requests*100:0}%`})},null,6)])]))),128))])]),_:1})]),_:1})):F("",!0),!y.value&&(!u.value||u.value.total_requests===0)?(h(),Y(Q,{key:4,flat:"",bordered:"",class:"tw-shadow-none"},{default:n(()=>[s(P,{class:"tw-text-center tw-py-12 tw-px-4"},{default:n(()=>[s(G,{name:"bar_chart",size:"64px",color:"grey",class:"tw-mb-4"}),a[14]||(a[14]=l("p",{class:"tw-text-gray-600 tw-text-lg"},"Nenhum dado dispon\xEDvel para o per\xEDodo selecionado",-1))]),_:1})]),_:1})):F("",!0),s(ke,{showing:y.value},{default:n(()=>[s(ve,{size:"50px",color:"primary"})]),_:1},8,["showing"]),s(je,{modelValue:j.value,"onUpdate:modelValue":a[7]||(a[7]=t=>j.value=t)},{default:n(()=>[s(Q,{class:"tw-w-full tw-max-w-3xl tw-pb-4"},{default:n(()=>[s(P,{class:"tw-flex tw-items-center tw-justify-between tw-gap-4"},{default:n(()=>{var t,v;return[l("div",null,[a[15]||(a[15]=l("div",{class:"tw-text-lg tw-font-semibold"}," Detalhes da requisi\xE7\xE3o ",-1)),l("div",qt," Provedor "+r((t=g.value)==null?void 0:t.provider)+" \xB7 Modelo "+r((v=g.value)==null?void 0:v.model),1)]),s(oe,{icon:"close",flat:"",round:"",dense:"",onClick:a[6]||(a[6]=E=>j.value=!1)})]}),_:1}),s(xe),s(P,null,{default:n(()=>{var t,v,E,te,ae,we,ge,fe,be;return[l("div",Pt,[l("div",null,[a[16]||(a[16]=l("div",{class:"tw-text-sm tw-text-gray-500"},"Status",-1)),s(de,{color:((t=g.value)==null?void 0:t.status)==="success"?"positive":"negative",class:"tw-mt-1 tw-capitalize"},{default:n(()=>{var pe;return[R(r((pe=g.value)==null?void 0:pe.status),1)]}),_:1},8,["color"])]),l("div",null,[a[17]||(a[17]=l("div",{class:"tw-text-sm tw-text-gray-500"},"Tokens",-1)),l("div",Ct,[R(r(_(((v=g.value)==null?void 0:v.total_tokens)||0))+" ",1),l("span",Vt," (in: "+r(_(((E=g.value)==null?void 0:E.input_tokens)||0))+" \xB7 out: "+r(_(((te=g.value)==null?void 0:te.output_tokens)||0))+") ",1)])]),l("div",null,[a[18]||(a[18]=l("div",{class:"tw-text-sm tw-text-gray-500"},"Custo estimado",-1)),l("div",Bt,r(H((ae=g.value)==null?void 0:ae.cost,(we=g.value)==null?void 0:we.cost_currency)),1)]),l("div",null,[a[19]||(a[19]=l("div",{class:"tw-text-sm tw-text-gray-500"},"Tempo de resposta",-1)),l("div",Dt,r((ge=g.value)!=null&&ge.response_time_ms?`${g.value.response_time_ms} ms`:"N/A"),1)])]),l("div",Tt,[a[20]||(a[20]=l("div",{class:"tw-text-sm tw-font-semibold tw-mb-2"},"Prompt enviado",-1)),l("pre",Nt,""+r(me((fe=g.value)==null?void 0:fe.prompt,"Sem prompt registrado"))+`
            `,1)]),l("div",null,[a[21]||(a[21]=l("div",{class:"tw-text-sm tw-font-semibold tw-mb-2"},"Resposta da IA",-1)),l("pre",Ft,""+r(me((be=g.value)==null?void 0:be.response_content,"Sem resposta registrada"))+`
            `,1)])]}),_:1}),s(ke,{showing:J.value},{default:n(()=>[s(ve,{color:"primary",size:"40px"})]),_:1},8,["showing"])]),_:1})]),_:1},8,["modelValue"])]),_:1}))}};export{Ht as default};
