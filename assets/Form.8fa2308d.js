import{b3 as y,a5 as b,j as g,r as V,s as w,a6 as U,a7 as i,a9 as _,ak as n,am as Q,aa as l,al as k,b8 as u,ad as p,b2 as x,an as S}from"./index.043ac35e.js";import{Q as C}from"./QSelect.9af77559.js";import{Q as j}from"./QForm.00c29b02.js";import{Q as N}from"./QPage.be6a5c4b.js";import{u as B}from"./unit.bbfd5501.js";import{u as D}from"./use-quasar.31251b42.js";import"./QItem.e2e3bfb8.js";import"./format.4d859e22.js";import"./pinia.a0e130f5.js";import"./axios.fafc493e.js";const E={class:"tw-mb-6"},h={class:"tw-text-3xl tw-font-bold"},z={class:"tw-grid tw-grid-cols-2 tw-gap-4"},F={class:"tw-flex tw-gap-4"},H={__name:"Form",setup(M){const m=y(),v=b(),s=B(),d=D(),r=g(()=>!!m.params.token),e=V({name:"",domain:"",city:"",uf:"",cnpj:"",usage_limit_monthly:null,status:"ativo"}),f=["ativo","inativo"];w(async()=>{if(r.value){const o=await s.get(m.params.token);o&&(e.value={name:o.name||"",domain:o.domain||"",city:o.city||"",uf:o.uf||"",cnpj:o.cnpj||"",usage_limit_monthly:o.usage_limit_monthly||null,status:o.status||"ativo"})}});const c=async()=>{try{r.value?(await s.update(m.params.token,e.value),d.notify({type:"positive",message:"Unidade atualizada com sucesso!"})):(await s.create(e.value),d.notify({type:"positive",message:"Unidade criada com sucesso!"})),v.push("/units")}catch{d.notify({type:"negative",message:"Erro ao salvar unidade"})}};return(o,t)=>(_(),U(N,{class:"tw-p-6"},{default:i(()=>[n("div",E,[n("h1",h,Q(r.value?"Editar Unidade":"Nova Unidade"),1)]),l(S,null,{default:i(()=>[l(k,null,{default:i(()=>[l(j,{onSubmit:c,class:"tw-space-y-4"},{default:i(()=>[l(u,{modelValue:e.value.name,"onUpdate:modelValue":t[0]||(t[0]=a=>e.value.name=a),label:"Nome",rules:[a=>!!a||"Nome \xE9 obrigat\xF3rio"],outlined:""},null,8,["modelValue","rules"]),l(u,{modelValue:e.value.domain,"onUpdate:modelValue":t[1]||(t[1]=a=>e.value.domain=a),label:"Dom\xEDnio autorizado",hint:"Ex.: prefeitura.minha-cidade.gov.br",rules:[a=>!!a||"Dom\xEDnio \xE9 obrigat\xF3rio"],outlined:""},null,8,["modelValue","rules"]),n("div",z,[l(u,{modelValue:e.value.city,"onUpdate:modelValue":t[2]||(t[2]=a=>e.value.city=a),label:"Cidade",outlined:""},null,8,["modelValue"]),l(u,{modelValue:e.value.uf,"onUpdate:modelValue":t[3]||(t[3]=a=>e.value.uf=a),label:"UF",maxlength:"2",outlined:""},null,8,["modelValue"])]),l(u,{modelValue:e.value.cnpj,"onUpdate:modelValue":t[4]||(t[4]=a=>e.value.cnpj=a),label:"CNPJ",outlined:"",mask:"##.###.###/####-##"},null,8,["modelValue"]),l(u,{modelValue:e.value.usage_limit_monthly,"onUpdate:modelValue":t[5]||(t[5]=a=>e.value.usage_limit_monthly=a),modelModifiers:{number:!0},label:"Limite Mensal de Requisi\xE7\xF5es",type:"number",outlined:"",hint:"Deixe vazio para sem limite"},null,8,["modelValue"]),l(C,{modelValue:e.value.status,"onUpdate:modelValue":t[6]||(t[6]=a=>e.value.status=a),options:f,label:"Status",outlined:""},null,8,["modelValue"]),n("div",F,[l(p,{type:"submit",color:"primary",label:"Salvar",loading:x(s).loading},null,8,["loading"]),l(p,{flat:"",label:"Cancelar",onClick:t[7]||(t[7]=a=>o.$router.back())})])]),_:1})]),_:1})]),_:1})]),_:1}))}};export{H as default};
