import{b3 as y,a5 as f,j as w,r as V,s as g,a6 as k,a7 as s,a9 as _,ak as l,aa as t,ad as p,am as x,al as U,b8 as r,b4 as h,b7 as C,aB as P,bi as Q,b2 as B,an as E}from"./index.043ac35e.js";import{Q as A}from"./QForm.00c29b02.js";import{Q as S}from"./QPage.be6a5c4b.js";import{u as I}from"./provider.ea863f28.js";import{u as M}from"./use-quasar.31251b42.js";import"./pinia.a0e130f5.js";import"./axios.fafc493e.js";const $={class:"tw-mb-6"},N={class:"tw-text-3xl tw-font-bold tw-mt-4"},z={class:"row"},D={class:"col-12 col-md-6 tw-pr-2 tw-mb-3 tw-mb-md-0"},R={class:"col-12 col-md-6 tw-mb-3 tw-mb-md-0"},j={class:"row"},q={class:"col-12 col-md-8 tw-pr-2 tw-mb-3 tw-mb-md-0"},F={class:"col-12 col-md-4 tw-mb-3 tw-mb-md-0"},K={class:"row"},L={class:"col-12 col-md-6 tw-pr-2 tw-mb-3 tw-mb-md-0"},T={class:"col-12 col-md-6 tw-mb-3 tw-mb-md-0"},H={key:0,class:"tw-text-xs tw-text-gray-500 tw-mt-1"},G={class:"row"},J={class:"col-12 col-md-3 tw-pr-2 tw-mb-3 tw-mb-md-0"},O={class:"col-12 col-md-3 tw-pr-2 tw-mb-3 tw-mb-md-0"},W={class:"col-12 col-md-3 tw-pr-2 tw-mb-3 tw-mb-md-0"},X={class:"col-12 col-md-3 tw-mb-3 tw-mb-md-0"},Y={class:"tw-flex tw-justify-end tw-gap-2 tw-mt-6"},ie={__name:"Form",setup(Z){const m=y(),c=f(),d=M(),n=I(),i=w(()=>!!m.params.id),o=V({code:"",name:"",description:"",api_url:"",api_key_header:"Authorization",api_key_format:"Bearer {key}",api_key:"",default_model:"",priority:0,enabled:!0,default_models:[],config:{},input_token_unit:1e6,input_unit_price:0,output_token_unit:1e6,output_unit_price:0,pricing_currency:"USD"}),v=()=>{o.value.pricing_currency&&(o.value.pricing_currency=o.value.pricing_currency.toUpperCase())},b=async()=>{var u,e;try{i.value?(await n.update(m.params.id,o.value),d.notify({type:"positive",message:"Provedor atualizado com sucesso!"})):(await n.create(o.value),d.notify({type:"positive",message:"Provedor criado com sucesso!"})),c.push("/providers")}catch(a){d.notify({type:"negative",message:((e=(u=a.response)==null?void 0:u.data)==null?void 0:e.error)||"Erro ao salvar provedor"})}};return g(async()=>{var u;if(i.value)try{const e=await n.get(m.params.id);o.value={code:e.code,name:e.name,description:e.description||"",api_url:e.api_url,api_key_header:e.api_key_header||"Authorization",api_key_format:e.api_key_format||"Bearer {key}",api_key:"",default_model:e.default_model||"",priority:e.priority||0,enabled:(u=e.enabled)!=null?u:!0,default_models:e.default_models||[],config:e.config||{},input_token_unit:e.input_token_unit||1e6,input_unit_price:e.input_unit_price||0,output_token_unit:e.output_token_unit||1e6,output_unit_price:e.output_unit_price||0,pricing_currency:e.pricing_currency||"USD"}}catch{d.notify({type:"negative",message:"Erro ao carregar provedor"}),c.push("/providers")}}),(u,e)=>(_(),k(S,{class:"tw-p-6"},{default:s(()=>[l("div",$,[t(p,{flat:"",icon:"arrow_back",onClick:e[0]||(e[0]=a=>u.$router.push("/providers"))}),l("h1",N,x(i.value?"Editar":"Novo")+" Provedor de IA ",1)]),t(E,null,{default:s(()=>[t(U,null,{default:s(()=>[t(A,{onSubmit:b,class:"tw-space-y-4"},{default:s(()=>[l("div",z,[l("div",D,[t(r,{modelValue:o.value.code,"onUpdate:modelValue":e[1]||(e[1]=a=>o.value.code=a),label:"C\xF3digo *",hint:"Ex: claude, grok, openai",rules:[a=>!!a||"C\xF3digo \xE9 obrigat\xF3rio"],outlined:"",dense:"",readonly:i.value},null,8,["modelValue","rules","readonly"])]),l("div",R,[t(r,{modelValue:o.value.name,"onUpdate:modelValue":e[2]||(e[2]=a=>o.value.name=a),label:"Nome *",rules:[a=>!!a||"Nome \xE9 obrigat\xF3rio"],outlined:"",dense:""},null,8,["modelValue","rules"])])]),t(r,{modelValue:o.value.description,"onUpdate:modelValue":e[3]||(e[3]=a=>o.value.description=a),label:"Descri\xE7\xE3o",type:"textarea",rows:"2",outlined:"",dense:""},null,8,["modelValue"]),l("div",j,[l("div",q,[t(r,{modelValue:o.value.api_url,"onUpdate:modelValue":e[4]||(e[4]=a=>o.value.api_url=a),label:"URL da API *",hint:"Ex: https://api.anthropic.com/v1",rules:[a=>!!a||"URL \xE9 obrigat\xF3ria"],outlined:"",dense:""},null,8,["modelValue","rules"])]),l("div",F,[t(r,{modelValue:o.value.priority,"onUpdate:modelValue":e[5]||(e[5]=a=>o.value.priority=a),modelModifiers:{number:!0},label:"Prioridade",hint:"Maior = mais priorit\xE1rio",type:"number",min:"0",outlined:"",dense:""},null,8,["modelValue"])])]),l("div",K,[l("div",L,[t(r,{modelValue:o.value.api_key_header,"onUpdate:modelValue":e[6]||(e[6]=a=>o.value.api_key_header=a),label:"Header da API Key",hint:"Ex: Authorization, x-api-key",outlined:"",dense:""},null,8,["modelValue"])]),l("div",T,[t(r,{modelValue:o.value.api_key_format,"onUpdate:modelValue":e[7]||(e[7]=a=>o.value.api_key_format=a),label:"Formato da API Key",hint:"Ex: Bearer {key} ou {key}",outlined:"",dense:""},null,8,["modelValue"])])]),t(r,{modelValue:o.value.api_key,"onUpdate:modelValue":e[8]||(e[8]=a=>o.value.api_key=a),label:"API Key",hint:"Chave de API do provedor (ser\xE1 criptografada)",type:"password",outlined:"",dense:"",placeholder:i.value?"Preencha apenas se desejar substituir a chave atual":""},null,8,["modelValue","placeholder"]),i.value?(_(),h("p",H," A chave existente permanece ativa e j\xE1 est\xE1 criptografada. Informe um novo valor somente se precisar atualiz\xE1-la. ")):C("",!0),t(r,{modelValue:o.value.default_model,"onUpdate:modelValue":e[9]||(e[9]=a=>o.value.default_model=a),label:"Modelo Padr\xE3o",hint:"Ex: claude-3-5-sonnet-20241022",outlined:"",dense:""},null,8,["modelValue"]),t(P,{class:"tw-my-4"}),e[17]||(e[17]=l("div",null,[l("div",{class:"tw-text-lg tw-font-semibold tw-mb-2"},"Configura\xE7\xE3o de custos"),l("p",{class:"tw-text-sm tw-text-gray-600 tw-mb-4"}," Informe como o provedor cobra tokens de entrada e sa\xEDda para que possamos calcular o custo por requisi\xE7\xE3o. ")],-1)),l("div",G,[l("div",J,[t(r,{modelValue:o.value.input_token_unit,"onUpdate:modelValue":e[10]||(e[10]=a=>o.value.input_token_unit=a),modelModifiers:{number:!0},label:"Tokens (entrada)",hint:"Quantidade de tokens usados na cobran\xE7a",type:"number",min:"1",outlined:"",dense:""},null,8,["modelValue"])]),l("div",O,[t(r,{modelValue:o.value.input_unit_price,"onUpdate:modelValue":e[11]||(e[11]=a=>o.value.input_unit_price=a),modelModifiers:{number:!0},label:"Valor (entrada)",type:"number",step:"0.000001",min:"0",outlined:"",dense:"",prefix:o.value.pricing_currency?`${o.value.pricing_currency} `:""},null,8,["modelValue","prefix"])]),l("div",W,[t(r,{modelValue:o.value.output_token_unit,"onUpdate:modelValue":e[12]||(e[12]=a=>o.value.output_token_unit=a),modelModifiers:{number:!0},label:"Tokens (sa\xEDda)",hint:"Quantidade de tokens usados na cobran\xE7a",type:"number",min:"1",outlined:"",dense:""},null,8,["modelValue"])]),l("div",X,[t(r,{modelValue:o.value.output_unit_price,"onUpdate:modelValue":e[13]||(e[13]=a=>o.value.output_unit_price=a),modelModifiers:{number:!0},label:"Valor (sa\xEDda)",type:"number",step:"0.000001",min:"0",outlined:"",dense:"",prefix:o.value.pricing_currency?`${o.value.pricing_currency} `:""},null,8,["modelValue","prefix"])])]),t(r,{modelValue:o.value.pricing_currency,"onUpdate:modelValue":e[14]||(e[14]=a=>o.value.pricing_currency=a),label:"Moeda",hint:"Ex: USD, BRL",outlined:"",dense:"",onBlur:v},null,8,["modelValue"]),t(Q,{modelValue:o.value.enabled,"onUpdate:modelValue":e[15]||(e[15]=a=>o.value.enabled=a),label:"Habilitado"},null,8,["modelValue"]),l("div",Y,[t(p,{flat:"",label:"Cancelar",onClick:e[16]||(e[16]=a=>u.$router.push("/providers"))}),t(p,{type:"submit",color:"primary",label:"Salvar",loading:B(n).loading},null,8,["loading"])])]),_:1})]),_:1})]),_:1})]),_:1}))}};export{ie as default};
