import{b3 as E,r as k,s as U,a6 as c,a7 as a,a9 as i,ak as e,aa as s,ad as y,am as l,b4 as f,al as g,ac as n,an as w,ab as q,b5 as D,b6 as $,b7 as C}from"./index.043ac35e.js";import{a as A,b as Q,Q as N}from"./QItem.e2e3bfb8.js";import{Q as L}from"./QList.5e58bb2a.js";import{Q as P}from"./QPage.be6a5c4b.js";import{u as V}from"./unit.bbfd5501.js";import{u as F}from"./usage.a89f74b4.js";import{u as G}from"./use-quasar.31251b42.js";import"./pinia.a0e130f5.js";import"./axios.fafc493e.js";const M={class:"tw-mb-6"},R={class:"tw-text-3xl tw-font-bold tw-mt-4"},j={key:0,class:"tw-grid tw-grid-cols-1 md:tw-grid-cols-2 tw-gap-6"},z={class:"tw-space-y-2"},O={class:"tw-space-y-2"},J={class:"tw-text-sm tw-text-gray-500 tw-mt-2"},H={class:"tw-flex tw-items-center tw-justify-between tw-mb-4"},K={key:1,class:"tw-text-center tw-py-4 tw-text-gray-500"},W={key:0,class:"tw-space-y-2"},rt={__name:"Detail",setup(X){const v=E(),b=V(),I=F(),m=G(),o=k(null),p=k([]),r=k(null);U(async()=>{await x()});const x=async()=>{o.value=await b.get(v.params.token),o.value&&(o.value.api_tokens?p.value=o.value.api_tokens:o.value.apiTokens&&(p.value=o.value.apiTokens),await S())},S=async()=>{try{r.value=await I.getUnitUsage(v.params.token)}catch(u){console.error("Erro ao carregar estat\xEDsticas:",u)}},B=async()=>{m.dialog({title:"Gerar Token",message:"Digite um nome para o token:",prompt:{model:"Novo Token",type:"text"},cancel:!0}).onOk(async u=>{try{const t=await b.generateApiToken(v.params.token,u);m.notify({type:"positive",message:"Token gerado com sucesso!"}),T(t.token),await x()}catch{m.notify({type:"negative",message:"Erro ao gerar token"})}})},T=u=>{navigator.clipboard.writeText(u),m.notify({type:"positive",message:"Token copiado para a \xE1rea de transfer\xEAncia!"})};return(u,t)=>(i(),c(P,{class:"tw-p-6"},{default:a(()=>{var _;return[e("div",M,[s(y,{flat:"",icon:"arrow_back",onClick:t[0]||(t[0]=d=>u.$router.push("/units"))}),e("h1",R,l(((_=o.value)==null?void 0:_.name)||"Carregando..."),1)]),o.value?(i(),f("div",j,[s(w,null,{default:a(()=>[s(g,null,{default:a(()=>[t[6]||(t[6]=e("h2",{class:"tw-text-xl tw-font-bold tw-mb-4"},"Informa\xE7\xF5es",-1)),e("div",z,[e("p",null,[t[1]||(t[1]=e("strong",null,"Dom\xEDnio autorizado:",-1)),n(" "+l(o.value.domain||"N\xE3o informado"),1)]),e("p",null,[t[2]||(t[2]=e("strong",null,"Cidade:",-1)),n(" "+l(o.value.city),1)]),e("p",null,[t[3]||(t[3]=e("strong",null,"UF:",-1)),n(" "+l(o.value.uf),1)]),e("p",null,[t[4]||(t[4]=e("strong",null,"CNPJ:",-1)),n(" "+l(o.value.cnpj||"N\xE3o informado"),1)]),e("p",null,[t[5]||(t[5]=e("strong",null,"Status:",-1)),n(" "+l(o.value.status),1)])])]),_:1})]),_:1}),s(w,null,{default:a(()=>[s(g,null,{default:a(()=>[t[9]||(t[9]=e("h2",{class:"tw-text-xl tw-font-bold tw-mb-4"},"Configura\xE7\xF5es",-1)),e("div",O,[e("p",null,[t[7]||(t[7]=e("strong",null,"Limite Mensal:",-1)),n(" "+l(o.value.usage_limit_monthly||"Sem limite"),1)]),e("p",J,[s(q,{name:"info",size:"sm"}),t[8]||(t[8]=n(' Os provedores de IA s\xE3o gerenciados separadamente no menu "Provedores de IA" ',-1))])])]),_:1})]),_:1}),s(w,null,{default:a(()=>[s(g,null,{default:a(()=>[e("div",H,[t[10]||(t[10]=e("h2",{class:"tw-text-xl tw-font-bold"},"Tokens de API",-1)),s(y,{color:"primary",label:"Gerar Token",icon:"add",onClick:B})]),p.value.length>0?(i(),c(L,{key:0},{default:a(()=>[(i(!0),f(D,null,$(p.value,d=>(i(),c(A,{key:d.id},{default:a(()=>[s(Q,null,{default:a(()=>[s(N,null,{default:a(()=>[n(l(d.name),1)]),_:2},1024),s(N,{caption:""},{default:a(()=>[n(l(d.token),1)]),_:2},1024)]),_:2},1024),s(Q,{side:""},{default:a(()=>[s(y,{flat:"",round:"",dense:"",icon:"content_copy",onClick:Y=>T(d.token)},null,8,["onClick"])]),_:2},1024)]),_:2},1024))),128))]),_:1})):(i(),f("div",K," Nenhum token criado "))]),_:1})]),_:1}),s(w,null,{default:a(()=>[s(g,null,{default:a(()=>[t[16]||(t[16]=e("h2",{class:"tw-text-xl tw-font-bold tw-mb-4"},"Estat\xEDsticas do M\xEAs",-1)),r.value?(i(),f("div",W,[e("p",null,[t[11]||(t[11]=e("strong",null,"Total de Requisi\xE7\xF5es:",-1)),n(" "+l(r.value.total_requests||0),1)]),e("p",null,[t[12]||(t[12]=e("strong",null,"Bem-sucedidas:",-1)),n(" "+l(r.value.successful_requests||0),1)]),e("p",null,[t[13]||(t[13]=e("strong",null,"Com Erro:",-1)),n(" "+l(r.value.failed_requests||0),1)]),e("p",null,[t[14]||(t[14]=e("strong",null,"Total de Tokens:",-1)),n(" "+l(r.value.total_tokens||0),1)]),e("p",null,[t[15]||(t[15]=e("strong",null,"Custo Estimado:",-1)),n(" R$ "+l((r.value.total_cost||0).toFixed(4)),1)])])):C("",!0)]),_:1})]),_:1})])):C("",!0)]}),_:1}))}};export{rt as default};
